<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Товары - Falcons</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
<style>
  :root[data-theme='light'] {
    --bg-main: #fff;
    --text-main: #181818;
    --navbar-bg: #198754;
    --navbar-text: #fff;
    --card-bg: #fff;
    --card-text: #181818;
    --modal-bg: #fff;
    --modal-text: #181818;
    --form-bg: #fff;
    --form-text: #181818;
    --form-border: #dee2e6;
    --form-placeholder: #6c757d;
    --btn-outline-color: #198754;
    --btn-outline-hover-bg: #198754;
    --btn-outline-hover-text: #fff;
    --theme-btn-bg: #198754;
    --theme-btn-text: #fff;
    --theme-btn-border: #198754;
    --theme-btn-hover-bg: #157347;
    --theme-btn-hover-text: #fff;
  }
  :root[data-theme='dark'] {
    --bg-main: #133c21;
    --text-main: #e9fff1;
    --navbar-bg: #1e5733;
    --navbar-text: #8fffc1;
    --card-bg: #174c2c;
    --card-text: #e6f9ea;
    --modal-bg: #1a472b;
    --modal-text: #e6f9ea;
    --form-bg: #1a3d26;
    --form-text: #e6f9ea;
    --form-border: #2d5c3d;
    --form-placeholder: #8fffc1;
    --btn-outline-color: #8fffc1;
    --btn-outline-hover-bg: #8fffc1;
    --btn-outline-hover-text: #133c21;
    --theme-btn-bg: #8fffc1;
    --theme-btn-text: #133c21;
    --theme-btn-border: #8fffc1;
    --theme-btn-hover-bg: #67e6a1;
    --theme-btn-hover-text: #133c21;
  }
  html, body {
    background: var(--bg-main) !important;
    color: var(--text-main) !important;
    min-height: 100vh;
    transition: background 0.3s, color 0.3s;
  }
  .navbar, .footer {
    background: var(--navbar-bg) !important;
    color: var(--navbar-text) !important;
    box-shadow: 0 2px 24px #0003;
  }
  .navbar .navbar-brand, .navbar .nav-link,
  .footer, .footer a {
    color: var(--navbar-text) !important;
    transition: color 0.3s;
  }
  .card, .card-header, .list-group-item {
    background: var(--card-bg) !important;
    color: var(--card-text) !important;
    border-color: rgba(140,255,200,0.13) !important;
  }

  /* Стили для кнопки переключения темы */
  #theme-toggle.btn {
    background: var(--theme-btn-bg) !important;
    border: 2px solid var(--theme-btn-border) !important;
    color: var(--theme-btn-text) !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15) !important;
    transition: all 0.3s ease !important;
  }
  #theme-toggle.btn:hover, #theme-toggle.btn:focus {
    outline: none;
    background: var(--theme-btn-hover-bg) !important;
    color: var(--theme-btn-hover-text) !important;
    border-color: var(--theme-btn-hover-bg) !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2) !important;
    transform: translateY(-1px);
  }

  .badge.bg-success, .badge.bg-primary {
    color: white !important;
  }
  
  /* Стили для модального окна корзины */
  .modal-content {
    background: var(--modal-bg) !important;
    color: var(--modal-text) !important;
    border: 1px solid rgba(140,255,200,0.2) !important;
  }
  .modal-header, .modal-footer {
    border-color: rgba(140,255,200,0.2) !important;
    background: var(--modal-bg) !important;
    color: var(--modal-text) !important;
  }
  .btn-close {
    filter: invert(1) grayscale(100%) brightness(200%);
  }
  [data-theme='light'] .btn-close {
    filter: none;
  }
  
  /* Стили для кнопки корзины */
  .btn-cart {
    color: var(--btn-outline-color) !important;
    border-color: var(--btn-outline-color) !important;
    background: transparent !important;
  }
  .btn-cart:hover {
    background: var(--btn-outline-hover-bg) !important;
    color: var(--btn-outline-hover-text) !important;
    border-color: var(--btn-outline-hover-bg) !important;
  }
  
  /* Стили для списка товаров в корзине */
  .list-group-item {
    background: var(--card-bg) !important;
    color: var(--card-text) !important;
    border-color: rgba(140,255,200,0.2) !important;
  }
  
  /* Стили для текста в модальном окне */
  .modal-title, .modal-body, .modal-footer {
    color: var(--modal-text) !important;
  }
  
  /* Стили для иконки корзины когда пусто */
  #cart-empty .bi-basket {
    color: var(--form-placeholder) !important;
  }
  #cart-empty p {
    color: var(--form-placeholder) !important;
  }
</style>
</head>
<body>
<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="../index.html"><i class="bi bi-lightning-fill me-2"></i>Falcons</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <button id="theme-toggle" class="btn ms-3" type="button" title="Сменить тему">
      <i class="bi bi-moon"></i>
    </button>
    <div class="collapse navbar-collapse" id="mainNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="../index.html"><i class="bi bi-house me-1"></i>Главная</a></li>
        <li class="nav-item"><a class="nav-link" href="news.html"><i class="bi bi-newspaper me-1"></i>Новости</a></li>
        <li class="nav-item"><a class="nav-link" href="practice.html"><i class="bi bi-code-slash me-1"></i>Практика</a></li>
        <li class="nav-item"><a class="nav-link active" href="goods.html"><i class="bi bi-cart me-1"></i>Товары</a></li>
        <li class="nav-item"><a class="nav-link" href="contacts.html"><i class="bi bi-telephone me-1"></i>Контакты</a></li>
      </ul>
    </div>
  </div>
</nav>

<main class="container my-4">
  <h1 class="mb-4"><i class="bi bi-cart me-2"></i>Каталог товаров</h1>
  <p class="mb-4">Здесь представлен список товаров Falcons.</p>

  <!-- Кнопка-корзина в правом верхнем углу -->
  <div class="d-flex justify-content-end mb-4">
    <button type="button" class="btn btn-cart position-relative" data-bs-toggle="modal" data-bs-target="#cartModal">
      <i class="bi bi-basket"></i> Корзина
      <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cart-count">0</span>
    </button>
  </div>

  <!-- Товары -->
  <section>
    <h2 class="mb-4"><i class="bi bi-cart"></i> Наши товары</h2>
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
      <div class="col">
        <div class="card h-100 shadow-sm">
          <img src="../images/wjacket.png" class="card-img-top" alt="Жакет Falcons белый" style="height: 250px; object-fit: cover;">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Жакет Falcons белый</h5>
            <p class="card-text flex-grow-1">Стильный белый жакет с логотипом Falcons. Высокое качество материалов.</p>
            <span class="badge rounded-pill bg-success mb-2 align-self-start">$99</span>
            <button class="btn btn-primary mt-auto add-to-cart" data-name="Жакет Falcons белый" data-price="99">В корзину</button>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card h-100 shadow-sm">
          <img src="../images/bjacket.png" class="card-img-top" alt="Жакет Falcons черный" style="height: 250px; object-fit: cover;">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Жакет Falcons черный</h5>
            <p class="card-text flex-grow-1">Черный жакет премиум-класса с вышитым логотипом команды.</p>
            <span class="badge rounded-pill bg-success mb-2 align-self-start">$99</span>
            <button class="btn btn-primary mt-auto add-to-cart" data-name="Жакет Falcons черный" data-price="99">В корзину</button>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card h-100 shadow-sm">
          <img src="../images/jersey.png" class="card-img-top" alt="Джерси Falcons" style="height: 250px; object-fit: cover;">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Джерси Falcons</h5>
            <p class="card-text flex-grow-1">Официальная игровая форма команды Falcons. Дышащий материал.</p>
            <span class="badge rounded-pill bg-primary mb-2 align-self-start">$50</span>
            <button class="btn btn-primary mt-auto add-to-cart" data-name="Джерси Falcons" data-price="50">В корзину</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Модальное окно корзины -->
  <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="cartModalLabel"><i class="bi bi-basket"></i> Корзина</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
        </div>
        <div class="modal-body">
          <div id="cart-empty" class="text-center py-4">
            <i class="bi bi-basket display-4"></i>
            <p class="mt-2">Корзина пуста</p>
          </div>
          <ul class="list-group mb-3" id="cart-list"></ul>
          <div class="text-end fw-bold fs-5 mt-3">Итого: <span id="cart-total">0</span> $</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Продолжить покупки</button>
          <button type="button" class="btn btn-success" id="cart-checkout">Оформить заказ</button>
        </div>
      </div>
    </div>
  </div>
</main>

<footer class="footer py-4 mt-5">
  <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center">
    <p class="mb-0">© Falcons 2025</p>
    <div>
      <a href="contacts.html" class="text-white text-decoration-none me-3">Контакты</a>
      <a href="#" class="text-white text-decoration-none">Вверх</a>
    </div>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Корзина
let cart = [];

function updateCart() {
  const cartList = document.getElementById('cart-list');
  const cartTotal = document.getElementById('cart-total');
  const cartCount = document.getElementById('cart-count');
  const cartEmpty = document.getElementById('cart-empty');
  
  cartList.innerHTML = '';
  let totalItems = 0, totalSum = 0;
  
  cart.forEach((item, i) => {
    totalItems += item.qty;
    totalSum += item.price * item.qty;
    const li = document.createElement('li');
    li.className = 'list-group-item d-flex justify-content-between align-items-center';
    li.innerHTML = `
      <div>
        <strong>${item.name}</strong><br>
        <small>${item.price}$ × ${item.qty}</small>
      </div>
      <div>
        <span class="badge bg-primary rounded-pill me-2">${item.price * item.qty}$</span>
        <button class="btn btn-sm btn-outline-danger" onclick="removeFromCart(${i})"><i class="bi bi-x"></i></button>
      </div>
    `;
    cartList.appendChild(li);
  });
  
  cartTotal.textContent = totalSum;
  cartCount.textContent = totalItems;
  
  // Показываем/скрываем сообщение о пустой корзине
  if (cart.length === 0) {
    cartEmpty.style.display = 'block';
    cartList.style.display = 'none';
  } else {
    cartEmpty.style.display = 'none';
    cartList.style.display = 'block';
  }
}

window.removeFromCart = function(i) {
  cart.splice(i, 1);
  updateCart();
}

// Добавление в корзину
document.querySelectorAll('.add-to-cart').forEach(btn => {
  btn.addEventListener('click', () => {
    const name = btn.dataset.name;
    const price = Number(btn.dataset.price);
    const found = cart.find(item => item.name === name);
    
    if (found) { 
      found.qty++; 
    } else { 
      cart.push({ name, price, qty: 1 }); 
    }
    
    updateCart();
    
    // Анимация кнопки
    btn.innerHTML = '<i class="bi bi-check"></i> Добавлено';
    btn.classList.remove('btn-primary');
    btn.classList.add('btn-success');
    
    setTimeout(() => {
      btn.innerHTML = 'В корзину';
      btn.classList.remove('btn-success');
      btn.classList.add('btn-primary');
    }, 1500);
  });
});

// Оформление заказа
document.getElementById('cart-checkout').onclick = function() {
  if (cart.length === 0) {
    alert('Корзина пуста! Добавьте товары перед оформлением заказа.');
    return;
  }
  
  let orderDetails = 'Ваш заказ:\n\n';
  cart.forEach(item => {
    orderDetails += `${item.name} - ${item.price}$ × ${item.qty} = ${item.price * item.qty}$\n`;
  });
  orderDetails += `\nОбщая сумма: ${document.getElementById('cart-total').textContent}$`;
  
  alert(orderDetails + '\n\nСпасибо за заказ! Мы свяжемся с вами в ближайшее время.');
  cart = [];
  updateCart();
  
  // Закрываем модальное окно
  const modal = bootstrap.Modal.getInstance(document.getElementById('cartModal'));
  modal.hide();
};

// Темная тема
document.addEventListener("DOMContentLoaded", function() {
  const themeToggle = document.getElementById('theme-toggle');
  if (!themeToggle) return;
  
  function applyTheme(theme) {
    document.documentElement.setAttribute('data-theme', theme);
    localStorage.setItem('theme', theme);
    themeToggle.innerHTML = theme === 'dark'
      ? '<i class="bi bi-sun"></i>'
      : '<i class="bi bi-moon"></i>';
  }
  
  const savedTheme = localStorage.getItem('theme');
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  applyTheme(savedTheme || (prefersDark ? 'dark' : 'light'));
  
  themeToggle.onclick = () => {
    const current = document.documentElement.getAttribute('data-theme');
    applyTheme(current === 'dark' ? 'light' : 'dark');
  };
  
  // Инициализация корзины
  updateCart();
});
</script>
</body>
</html>